<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IliyaAg Help Center 1.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        #bios-screen {
            width: 100%;
            height: calc(100vh - 50px);
            background: #0033CC;
            color: #fff;
            padding: 20px;
            position: relative;
            animation: crtFlicker 0.15s infinite;
            overflow-y: auto;
        }

        #bios-screen.green-theme {
            background: #001100;
            color: #00ff00;
        }

        @keyframes crtFlicker {
            0% { opacity: 0.97; }
            50% { opacity: 1; }
            100% { opacity: 0.98; }
        }

        #bios-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 1;
        }

        .content {
            position: relative;
            z-index: 2;
            white-space: pre-wrap;
            line-height: 1.5;
        }

        .help-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            color: #fff;
            padding: 10px 20px;
            border-top: 2px solid #fff;
            z-index: 10;
        }

        .green-theme .help-bar {
            color: #00ff00;
            border-top-color: #00ff00;
        }

        .menu-item {
            margin: 5px 0;
            padding: 2px 5px;
        }

        .menu-item.selected {
            background: #fff;
            color: #0033CC;
        }

        .green-theme .menu-item.selected {
            background: #00ff00;
            color: #001100;
        }

        input[type="text"] {
            background: transparent;
            border: none;
            color: inherit;
            font-family: inherit;
            font-size: inherit;
            outline: none;
            width: 400px;
        }

        .cursor {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        #iframe-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            display: none;
            z-index: 100;
        }

        #iframe-container.active {
            display: flex;
            flex-direction: column;
        }

        .iframe-header {
            background: #000;
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #fff;
            min-height: 50px;
        }

        .green-theme ~ #iframe-container .iframe-header {
            color: #00ff00;
            border-bottom-color: #00ff00;
        }

        #iframe-container iframe {
            flex: 1;
            width: 100%;
            border: none;
        }

        .close-btn {
            background: #fff;
            color: #0033CC;
            border: 2px solid #fff;
            padding: 5px 15px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
        }

        .close-btn:hover {
            background: #ccc;
        }

        .breadcrumb {
            font-size: 0.9em;
            margin-bottom: 10px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div id="bios-screen">
        <div class="content" id="content"></div>
    </div>
    
    <div class="help-bar" id="help-bar">
        F1 Help | F3 Open | F5 Theme | F10 Exit
    </div>

    <div id="iframe-container">
        <div class="iframe-header">
            <span id="iframe-title">Loading...</span>
            <button class="close-btn" onclick="closeIframe()">Close [ESC]</button>
        </div>
        <iframe id="project-iframe"></iframe>
    </div>

    <script>
        // ============================================
        // DATA STRUCTURE - Ø¢Ø±Ø§ÛŒÙ‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´)
        // ============================================
        const PROJECTS_DATA = [
            {
                username: "farzad",
                displayName: "Farzad",
                projects: [
                    { name: "Game Deploy Hero", file: "game-deploy-hero.html" },
                ]
            },
            {
                username: "masoud",
                displayName: "Masoud",
                projects: [
                    { name: "About Iliya", file: "index.html" }
                ]
            },
        ];

        // ============================================
        // GLOBAL STATE
        // ============================================
        let currentScreen = 'boot';
        let menuIndex = 0;
        let commandHistory = [];
        let historyIndex = -1;
        let currentUser = 'Guest';
        let navigationStack = [];
        let selectedUserData = null;

        const content = document.getElementById('content');
        const biosScreen = document.getElementById('bios-screen');
        const helpBar = document.getElementById('help-bar');
        const iframeContainer = document.getElementById('iframe-container');
        const projectIframe = document.getElementById('project-iframe');
        const iframeTitle = document.getElementById('iframe-title');

        // ============================================
        // AUDIO - BIOS BEEP
        // ============================================
        function playBeep(frequency = 800, duration = 100) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = frequency;
                oscillator.type = 'square';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration / 1000);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function clearScreen() {
            content.innerHTML = '';
        }

        function print(text) {
            content.innerHTML += text;
            biosScreen.scrollTop = biosScreen.scrollHeight;
        }

        async function printAsync(text, delay = 0) {
            return new Promise(resolve => {
                setTimeout(() => {
                    print(text);
                    resolve();
                }, delay);
            });
        }

        function getDateTimeString() {
            const now = new Date();
            return now.toLocaleString('en-US', { 
                year: 'numeric', 
                month: '2-digit', 
                day: '2-digit',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
        }

        // ============================================
        // BOOT SEQUENCE
        // ============================================
        async function bootSequence() {
            playBeep(1000, 200);
            await printAsync('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            await printAsync('â•‘         PHOENIX RETRO SYSTEM BIOS v1.0 (C) 1985-2025        â•‘\n');
            await printAsync('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            
            await printAsync('Initializing System...\n', 300);
            await printAsync('CPU: Intel 8086 Compatible\n', 200);
            await printAsync('RAM Test: ', 400);
            
            for (let i = 0; i <= 64; i += 16) {
                await printAsync(`${i} KB `, 100);
            }
            await printAsync('OK\n\n', 200);
            
            await printAsync('Loading BIOS Extensions...\n', 300);
            await printAsync('Keyboard...........OK\n', 200);
            await printAsync('Display............OK\n', 200);
            await printAsync('System Timer.......OK\n\n', 200);
            
            playBeep(600, 150);
            await printAsync('Press any key to continue...', 500);
            
            currentScreen = 'boot-wait';
        }

        // ============================================
        // MAIN MENU
        // ============================================
        function showMainMenu() {
            clearScreen();
            currentScreen = 'main-menu';
            menuIndex = 0;
            renderMainMenu();
        }

        function renderMainMenu() {
            clearScreen();
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘                      MAIN MENU                                â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            
            const options = [
                '1. Open HTML Project',
                '2. Command Line Interface',
                '3. System Information',
                '4. Exit System'
            ];
            
            options.forEach((option, index) => {
                const className = index === menuIndex ? ' class="menu-item selected"' : ' class="menu-item"';
                print(`<div${className}>${option}</div>\n`);
            });
            
            print('\n\nUse â†‘/â†“ arrows to navigate, Enter to select\n');
        }

        function handleMainMenuSelection() {
            playBeep();
            switch(menuIndex) {
                case 0:
                    showUserFolders();
                    break;
                case 1:
                    showCommandLine();
                    break;
                case 2:
                    showSystemInfo();
                    break;
                case 3:
                    exitSystem();
                    break;
            }
        }

        // ============================================
        // USER FOLDERS NAVIGATION
        // ============================================
        function showUserFolders() {
            clearScreen();
            currentScreen = 'user-folders';
            menuIndex = 0;
            navigationStack = ['main'];
            renderUserFolders();
        }

        function renderUserFolders() {
            clearScreen();
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘                   SELECT USER FOLDER                          â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            print('<div class="breadcrumb">Main Menu > User Folders</div>\n\n');
            
            PROJECTS_DATA.forEach((user, index) => {
                const className = index === menuIndex ? ' class="menu-item selected"' : ' class="menu-item"';
                print(`<div${className}>ğŸ“ ${user.displayName} (${user.projects.length} projects)</div>\n`);
            });
            
            print('\n\nUse â†‘/â†“ arrows to navigate, Enter to select, ESC to go back\n');
        }

        function handleUserFolderSelection() {
            playBeep();
            selectedUserData = PROJECTS_DATA[menuIndex];
            showUserProjects();
        }

        function showUserProjects() {
            clearScreen();
            currentScreen = 'user-projects';
            menuIndex = 0;
            navigationStack.push('projects');
            renderUserProjects();
        }

        function renderUserProjects() {
            clearScreen();
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print(`â•‘                   ${selectedUserData.displayName.toUpperCase().padEnd(43)}â•‘\n`);
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            print(`<div class="breadcrumb">Main Menu > User Folders > ${selectedUserData.displayName}</div>\n\n`);
            
            selectedUserData.projects.forEach((project, index) => {
                const className = index === menuIndex ? ' class="menu-item selected"' : ' class="menu-item"';
                print(`<div${className}>ğŸ“„ ${project.name} - ${project.file}</div>\n`);
            });
            
            print('\n\nUse â†‘/â†“ arrows to navigate, Enter to open, ESC to go back\n');
        }

        function handleProjectSelection() {
            playBeep();
            const project = selectedUserData.projects[menuIndex];
            loadExternalApp(selectedUserData.username, project.file, project.name);
        }

        function goBackInNavigation() {
            playBeep(400, 100);
            navigationStack.pop();
            
            if (navigationStack.length === 0) {
                showMainMenu();
            } else if (navigationStack[navigationStack.length - 1] === 'main') {
                showUserFolders();
            }
        }

        // ============================================
        // COMMAND LINE INTERFACE
        // ============================================
        function showCommandLine() {
            clearScreen();
            currentScreen = 'command-line';
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘              COMMAND LINE INTERFACE                           â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            print('Type "help" for available commands\n\n');
            showPrompt();
        }

        function showPrompt() {
            const promptText = `C:\\> `;
            print(`<span>${promptText}</span><input type="text" id="cmd-input" autocomplete="off"><span class="cursor">_</span>`);
            
            setTimeout(() => {
                const input = document.getElementById('cmd-input');
                if (input) {
                    input.focus();
                    input.addEventListener('keydown', handleCommandInput);
                }
            }, 50);
        }

        function handleCommandInput(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const input = e.target;
                const command = input.value.trim();
                
                // Remove input and cursor
                const parent = input.parentElement;
                const commandText = command || '';
                parent.innerHTML = `C:\\> ${commandText}\n`;
                
                if (command) {
                    commandHistory.push(command);
                    historyIndex = commandHistory.length;
                }
                
                executeCommand(command);
                
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (historyIndex > 0) {
                    historyIndex--;
                    e.target.value = commandHistory[historyIndex];
                }
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    e.target.value = commandHistory[historyIndex];
                } else {
                    historyIndex = commandHistory.length;
                    e.target.value = '';
                }
            } else if (e.key === 'Escape') {
                e.preventDefault();
                showMainMenu();
            }
        }

        function executeCommand(command) {
            if (!command) {
                showPrompt();
                return;
            }
            
            const parts = command.split(' ').filter(p => p.length > 0);
            const cmd = parts[0].toLowerCase();
            
            // Easter egg
            if (command === 'farzad') {
                playBeep(1200, 200);
                print('\nğŸ‰ Ø³Ù„Ø§Ù… ÙØ±Ø²Ø§Ø¯ Ø¹Ø²ÛŒØ²! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… BIOS ğŸ‰\n');
                print('Developer: Farzad - .NET | Angular | Next.js | WordPress\n\n');
                showPrompt();
                return;
            }
            if (command === 'farzad') {
                playBeep(1200, 200);
                print('\nğŸ‰ Ø³Ù„Ø§Ù… ÙØ±Ø²Ø§Ø¯ Ø¹Ø²ÛŒØ²! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… BIOS ğŸ‰\n');
                print('Developer: Farzad - .NET | Angular | Next.js | WordPress\n\n');
                showPrompt();
                return;
            }
            if (command === 'iliya') {
                playBeep(1200, 200);
                print('\nğŸ‰ Ø³Ù„Ø§Ù… Ø§ÛŒÙ„ÛŒØ§ Ø¹Ø²ÛŒØ²! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… BIOS ğŸ‰\n');
                print('\n Ø®ÙˆØ´Ø­Ø§Ù„Ù… Ú©Ù‡ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø³ÛŒØ¯ÛŒ \n');
                print('\n Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§ÛŒ Ø¨Ú¯Ùˆ ÙØ±Ø²Ø§Ø¯ Ø¨Ø±Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†Ù‡ \n');
                // print('Developer: Farzad - .NET | Angular | Next.js | WordPress\n\n');
                showPrompt();
                return;
            }
            
            switch(cmd) {
                case 'help':
                    print('\nAvailable Commands:\n');
                    print('  help              - Show this help message\n');
                    print('  list              - List all projects\n');
                    print('  open <user> <file> [newtab] - Open a project\n');
                    print('  clear             - Clear screen\n');
                    print('  about             - System information\n');
                    print('  menu              - Return to main menu\n');
                    print('  exit              - Return to main menu\n\n');
                    showPrompt();
                    break;
                    
                case 'list':
                    print('\nAvailable Projects:\n');
                    PROJECTS_DATA.forEach(user => {
                        print(`\nğŸ“ ${user.displayName}:\n`);
                        user.projects.forEach(project => {
                            print(`   - ${project.name} (${project.file})\n`);
                        });
                    });
                    print('\n');
                    showPrompt();
                    break;
                    
                case 'open':
                    if (parts.length < 3) {
                        print('\nUsage: open <username> <filename> [newtab]\n');
                        print('Example: open farzad game-deploy-hero.html\n');
                        print('Example: open masoud index.html true\n\n');
                        showPrompt();
                    } else {
                        const username = parts[1];
                        const filename = parts[2];
                        const newtab = parts[3] === 'true';
                        
                        // Find project name
                        let projectName = filename;
                        const user = PROJECTS_DATA.find(u => u.username === username);
                        if (user) {
                            const project = user.projects.find(p => p.file === filename);
                            if (project) {
                                projectName = project.name;
                            }
                        }
                        
                        if (newtab) {
                            const url = `https://iliyaag.github.io/Iliya-360-Feedback-Loop/${username}/${filename}`;
                            print(`\nOpening in new tab: ${url}\n\n`);
                            window.open(url, '_blank');
                            showPrompt();
                        } else {
                            loadExternalApp(username, filename, projectName);
                        }
                    }
                    break;
                    
                case 'clear':
                    showCommandLine();
                    break;
                    
                case 'about':
                    showSystemInfo();
                    break;
                    
                case 'menu':
                case 'exit':
                    showMainMenu();
                    break;
                    
                default:
                    print(`\nCommand not found: ${command}\n`);
                    print('Type "help" for available commands\n\n');
                    showPrompt();
            }
        }

        // ============================================
        // LOAD EXTERNAL APP
        // ============================================
        function loadExternalApp(username, htmlPath, projectName) {
            const url = `https://iliyaag.github.io/Iliya-360-Feedback-Loop/${username}/${htmlPath}`;
            
            playBeep(1000, 150);
            
            // Set iframe title and load
            iframeTitle.textContent = `${projectName} (${username})`;
            projectIframe.src = url;
            
            // Show iframe container
            iframeContainer.classList.add('active');
            
            console.log('Loading:', url);
        }

        function closeIframe() {
            playBeep(600, 100);
            iframeContainer.classList.remove('active');
            projectIframe.src = '';
        }

        // ============================================
        // SYSTEM INFO
        // ============================================
        function showSystemInfo() {
            clearScreen();
            currentScreen = 'system-info';
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘                   SYSTEM INFORMATION                          â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            
            print(`BIOS Version:    PHOENIX RETRO SYSTEM v1.0\n`);
            print(`BIOS Date:       1985-2025\n`);
            print(`Current User:    ${currentUser}\n`);
            print(`System Time:     ${getDateTimeString()}\n`);
            print(`Base Memory:     640 KB\n`);
            print(`Extended Memory: 63 MB\n`);
            print(`CPU Type:        Intel 8086 Compatible\n`);
            print(`Display:         VGA Color\n`);
            print(`Total Projects:  ${PROJECTS_DATA.reduce((sum, u) => sum + u.projects.length, 0)}\n\n`);
            
            print('Press any key to return to main menu...\n');
        }

        // ============================================
        // HELP SCREEN
        // ============================================
        function showHelp() {
            clearScreen();
            currentScreen = 'help';
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘                        HELP SCREEN                            â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');
            
            print('Function Keys:\n\n');
            print('  F1  - Show this help screen\n');
            print('  F3  - Quick open project selector\n');
            print('  F5  - Toggle theme (Blue/Green CRT)\n');
            print('  F10 - Exit system\n\n');
            
            print('Navigation:\n\n');
            print('  â†‘/â†“ - Navigate menu items\n');
            print('  Enter - Select menu item\n');
            print('  ESC - Go back to previous screen\n\n');
            
            print('Command Line:\n\n');
            print('  Type commands and press Enter\n');
            print('  Use arrow keys to navigate command history\n');
            print('  Type "help" for list of commands\n\n');
            
            print('Press any key to continue...\n');
        }

        // ============================================
        // EXIT SYSTEM
        // ============================================
        function exitSystem() {
            clearScreen();
            currentScreen = 'exit';
            playBeep(800, 300);
            print('\n\n\n');
            print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n');
            print('â•‘                                                               â•‘\n');
            print('â•‘              System halted. Safe to power off.               â•‘\n');
            print('â•‘                                                               â•‘\n');
            print('â•‘              Press any key to reboot system...               â•‘\n');
            print('â•‘                                                               â•‘\n');
            print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
        }

        // ============================================
        // THEME TOGGLE
        // ============================================
        function toggleTheme() {
            playBeep(1000, 100);
            biosScreen.classList.toggle('green-theme');
            helpBar.classList.toggle('green-theme');
        }

        // ============================================
        // KEYBOARD EVENT HANDLER
        // ============================================
        document.addEventListener('keydown', (e) => {
            // Handle iframe close with ESC
            if (e.key === 'Escape' && iframeContainer.classList.contains('active')) {
                e.preventDefault();
                closeIframe();
                return;
            }
            
            // Don't handle keys if typing in input
            if (e.target.tagName === 'INPUT') {
                return;
            }
            
            // Function keys
            if (e.key === 'F1') {
                e.preventDefault();
                showHelp();
                return;
            }
            
            if (e.key === 'F3') {
                e.preventDefault();
                showUserFolders();
                return;
            }
            
            if (e.key === 'F5') {
                e.preventDefault();
                toggleTheme();
                return;
            }
            
            if (e.key === 'F10') {
                e.preventDefault();
                exitSystem();
                return;
            }
            
            // Screen-specific handlers
            if (currentScreen === 'boot-wait') {
                showMainMenu();
            } else if (currentScreen === 'main-menu') {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex > 0 ? menuIndex - 1 : 3;
                    renderMainMenu();
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex < 3 ? menuIndex + 1 : 0;
                    renderMainMenu();
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    handleMainMenuSelection();
                }
            } else if (currentScreen === 'user-folders') {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex > 0 ? menuIndex - 1 : PROJECTS_DATA.length - 1;
                    renderUserFolders();
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex < PROJECTS_DATA.length - 1 ? menuIndex + 1 : 0;
                    renderUserFolders();
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    handleUserFolderSelection();
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    goBackInNavigation();
                }
            } else if (currentScreen === 'user-projects') {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex > 0 ? menuIndex - 1 : selectedUserData.projects.length - 1;
                    renderUserProjects();
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    playBeep(600, 50);
                    menuIndex = menuIndex < selectedUserData.projects.length - 1 ? menuIndex + 1 : 0;
                    renderUserProjects();
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    handleProjectSelection();
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    goBackInNavigation();
                }
            } else if (currentScreen === 'system-info' || currentScreen === 'help') {
                showMainMenu();
            } else if (currentScreen === 'exit') {
                location.reload();
            }
        });

        // ============================================
        // INITIALIZATION
        // ============================================
        window.addEventListener('load', () => {
            bootSequence();
        });
    </script>
</body>
</html>
